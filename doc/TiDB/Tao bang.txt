CREATE TABLE `V_APG10_TRANS` (
  `tidb_id` bigint(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,

  `SEQ_NO` bigint(20) DEFAULT NULL,
  `MTI` varchar(12) DEFAULT NULL,
  `CARD_NO` varchar(57) DEFAULT NULL,
  `PROC_CODE` varchar(66) DEFAULT NULL,
  `ORIGINAL_DATE` varchar(30) DEFAULT NULL,
  `TRACE_NO` varchar(18) DEFAULT NULL,
  `REF_NO` varchar(36) DEFAULT NULL,
  `ACQ_ID` varchar(33) DEFAULT NULL,
  `ISS_ID` char(6) DEFAULT NULL,
  `APPROVAL_CODE` varchar(18) DEFAULT NULL,
  `RESPONSE_CODE` varchar(9) DEFAULT NULL,
  `TERM_ID` varchar(24) DEFAULT NULL,
  `ORIGINAL_DATA` varchar(4000) DEFAULT NULL,
  `REVERSED` varchar(3) DEFAULT NULL,
  `TNX_STAMP` datetime DEFAULT NULL,
  `PACKAGER` varchar(300) DEFAULT NULL,
  `AMOUNT` bigint(20) DEFAULT NULL,
  `ACCOUNT_NO` varchar(69) DEFAULT NULL,
  `LOCAL_TIME` varchar(18) DEFAULT NULL,
  `LOCAL_DATE` varchar(12) DEFAULT NULL,
  `SETTLE_DATE` varchar(12) DEFAULT NULL,
  `MCC` varchar(12) DEFAULT NULL,
  `CURRENCY_CODE` varchar(9) DEFAULT NULL,
  `DEST_ACCOUNT` varchar(69) DEFAULT NULL,
  `RECONCILE_TIME` datetime DEFAULT NULL,
  `TRANX_DATE` datetime DEFAULT NULL,
  `ADD_INFO` varchar(765) DEFAULT NULL,
  `SERVICE_CODE` varchar(90) DEFAULT NULL,
  `VAS_INFO` varchar(600) DEFAULT NULL,
  `BEN_ID` varchar(33) DEFAULT NULL,
  `IBFT_INFO` varchar(999) DEFAULT NULL,
  `AMOUNT_SETTLEMENT` bigint(20) DEFAULT NULL,
  `AMOUNT_CARDHOLDER` bigint(20) DEFAULT NULL,
  `CURRENCY_CODE_SETTLEMENT` varchar(9) DEFAULT NULL,
  `CURRENCY_CODE_CARDHOLDER` varchar(9) DEFAULT NULL,
  `CONVERSION_RATE_SETTLEMENT` varchar(8) DEFAULT NULL,
  `CONVERSION_RATE_CARDHOLDER` varchar(8) DEFAULT NULL,
  `USER_DEFINE` varchar(60) DEFAULT NULL,
  `TRANX_REF` varchar(16) DEFAULT NULL,
  `ACQ_INST_COUNTRY_CODE` varchar(9) DEFAULT NULL,
  `POS_ENTRY_MODE` varchar(6) DEFAULT NULL,
  `POS_CONDITION_CODE` varchar(6) DEFAULT NULL,
  `CARD_ACCEPT_ID_CODE` varchar(15) DEFAULT NULL,
  `CARD_ACCEPT_NAME_LOCATION` varchar(40) DEFAULT NULL,
  `SETTLEMENT_CODE` tinyint(4) DEFAULT NULL,
  `PAYMENT_CODE` tinyint(4) DEFAULT NULL,
  `INFO_HOLDER_BENECIARY` varchar(100) DEFAULT NULL,
  `RECORD_DATA` varchar(999) DEFAULT NULL,
  `ADD_RECORD_DATA` varchar(999) DEFAULT NULL,
  `SETTLE_DATE_TIME` datetime DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;





CREATE TABLE `ISOMESSAGE` (
  `tidb_id` bigint(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,

  `SEQ_NO` bigint(20) DEFAULT NULL,
  `MTI` varchar(12) DEFAULT NULL,
  `CARD_NO` varchar(57) DEFAULT NULL,
  `PROC_CODE` varchar(18) DEFAULT NULL,
  `ORIGINAL_DATE` varchar(30) DEFAULT NULL,
  `TRACE_NO` varchar(18) DEFAULT NULL,
  `REF_NO` varchar(36) DEFAULT NULL,
  `ACQ_ID` varchar(33) DEFAULT NULL,
  `ISS_ID` varchar(33) DEFAULT NULL,
  `APPROVAL_CODE` varchar(18) DEFAULT NULL,
  `RESPONSE_CODE` varchar(9) DEFAULT NULL,
  `TERM_ID` varchar(24) DEFAULT NULL,
  `ORIGINAL_DATA` varchar(4000) DEFAULT NULL,
  `REVERSED` varchar(3) DEFAULT NULL,
  `TNX_STAMP` datetime DEFAULT NULL,
  `PACKAGER` varchar(300) DEFAULT NULL,
  `AMOUNT` bigint(20) DEFAULT NULL,
  `ACCOUNT_NO` varchar(69) DEFAULT NULL,
  `LOCAL_TIME` varchar(18) DEFAULT NULL,
  `LOCAL_DATE` varchar(12) DEFAULT NULL,
  `SETTLE_DATE` varchar(12) DEFAULT NULL,
  `MCC` varchar(12) DEFAULT NULL,
  `CURRENCY_CODE` varchar(9) DEFAULT NULL,
  `DEST_ACCOUNT` varchar(69) DEFAULT NULL,
  `RECONCILE_TIME` datetime DEFAULT NULL,
  `TRANX_DATE` datetime DEFAULT NULL,
  `ADD_INFO` varchar(765) DEFAULT NULL,
  `SERVICE_CODE` varchar(90) DEFAULT NULL,
  `VAS_INFO` varchar(600) DEFAULT NULL,
  `BEN_ID` varchar(33) DEFAULT NULL,
  `IBFT_INFO` varchar(999) DEFAULT NULL,
  `AMOUNT_SETTLEMENT` bigint(20) DEFAULT NULL,
  `AMOUNT_CARDHOLDER` bigint(20) DEFAULT NULL,
  `CURRENCY_CODE_SETTLEMENT` varchar(9) DEFAULT NULL,
  `CURRENCY_CODE_CARDHOLDER` varchar(9) DEFAULT NULL,
  `CONVERSION_RATE_SETTLEMENT` varchar(8) DEFAULT NULL,
  `CONVERSION_RATE_CARDHOLDER` varchar(8) DEFAULT NULL,
  `USER_DEFINE` varchar(60) DEFAULT NULL,
  `TRANX_REF` varchar(16) DEFAULT NULL,
  `ACQ_INST_COUNTRY_CODE` varchar(9) DEFAULT NULL,
  `POS_ENTRY_MODE` varchar(6) DEFAULT NULL,
  `POS_CONDITION_CODE` varchar(6) DEFAULT NULL,
  `CARD_ACCEPT_ID_CODE` varchar(15) DEFAULT NULL,
  `CARD_ACCEPT_NAME_LOCATION` varchar(40) DEFAULT NULL,
  `PAYMENT_CODE` tinyint(4) DEFAULT NULL,
  `INFO_HOLDER_BENECIARY` varchar(100) DEFAULT NULL,
  `RECORD_DATA` varchar(999) DEFAULT NULL,
  `ADD_RECORD_DATA` varchar(999) DEFAULT NULL,
  `REVERSED123` varchar(999) DEFAULT NULL,
  `REVERSED124` varchar(999) DEFAULT NULL,
  `REVERSED125` varchar(999) DEFAULT NULL,
  `MESSAGE_NUMBER` smallint(6) DEFAULT NULL,
  `LAST_MESSAGE_NUMBER` smallint(6) DEFAULT NULL,
  `SETTLEMENT_CODE` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;



CREATE TABLE `ISOMESSAGE_TMP_68_TO` (
  `tidb_id` bigint(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,
  `SEQ_NO` bigint(20) NOT NULL,
  `MTI` varchar(12) DEFAULT NULL,
  `CARD_NO` varchar(57) DEFAULT NULL,
  `PROC_CODE` varchar(18) DEFAULT NULL,
  `ORIGINAL_DATE` varchar(30) DEFAULT NULL,
  `TRACE_NO` varchar(18) DEFAULT NULL,
  `REF_NO` varchar(36) DEFAULT NULL,
  `ACQ_ID` varchar(33) DEFAULT NULL,
  `ISS_ID` varchar(33) DEFAULT NULL,
  `APPROVAL_CODE` varchar(18) DEFAULT NULL,
  `RESPONSE_CODE` varchar(9) DEFAULT NULL,
  `TERM_ID` varchar(24) DEFAULT NULL,
  `ORIGINAL_DATA` varchar(4000) DEFAULT NULL,
  `REVERSED` varchar(3) DEFAULT NULL,
  `TNX_STAMP` datetime DEFAULT NULL,
  `PACKAGER` varchar(300) DEFAULT NULL,
  `AMOUNT` bigint(20) DEFAULT NULL,
  `ACCOUNT_NO` varchar(69) DEFAULT NULL,
  `LOCAL_TIME` varchar(18) DEFAULT NULL,
  `LOCAL_DATE` varchar(12) DEFAULT NULL,
  `SETTLE_DATE` varchar(12) DEFAULT NULL,
  `MCC` varchar(12) DEFAULT NULL,
  `CURRENCY_CODE` varchar(9) DEFAULT NULL,
  `DEST_ACCOUNT` varchar(69) DEFAULT NULL,
  `RECONCILE_TIME` datetime DEFAULT NULL,
  `TRANX_DATE` datetime DEFAULT NULL,
  `ADD_INFO` varchar(765) DEFAULT NULL,
  `SERVICE_CODE` varchar(90) DEFAULT NULL,
  `VAS_INFO` varchar(600) DEFAULT NULL,
  `BEN_ID` varchar(33) DEFAULT NULL,
  `OF_YEAR` varchar(4) DEFAULT NULL,
  `ISREV` int(11) DEFAULT NULL,
  `ORIGRESPCODE` varchar(9) DEFAULT NULL,
  `IBFT_INFO` varchar(300) DEFAULT NULL,
  `AMOUNT_SETTLEMENT` decimal(26,8) DEFAULT NULL,
  `AMOUNT_CARDHOLDER` decimal(26,8) DEFAULT NULL,
  `CURRENCY_CODE_SETTLEMENT` varchar(9) DEFAULT NULL,
  `CURRENCY_CODE_CARDHOLDER` varchar(9) DEFAULT NULL,
  `CONVERSION_RATE_SETTLEMENT` varchar(8) DEFAULT NULL,
  `CONVERSION_RATE_CARDHOLDER` varchar(8) DEFAULT NULL,
  `USER_DEFINE` varchar(60) DEFAULT NULL,
  `TRANX_REF` varchar(16) DEFAULT NULL,
  `ACQ_COUNTRY` decimal(28,2) DEFAULT NULL,
  `POS_ENTRY_CODE` decimal(28,2) DEFAULT NULL,
  `POS_CONDITION_CODE` decimal(28,2) DEFAULT NULL,
  `ADDRESPONSE` varchar(25) DEFAULT NULL,
  `MVV` varchar(20) DEFAULT NULL,
  `F4` decimal(26,8) DEFAULT NULL,
  `F5` decimal(26,8) DEFAULT NULL,
  `F6` decimal(26,8) DEFAULT NULL,
  `F49` int(11) DEFAULT NULL,
  `SETTLEMENT_CODE` int(11) DEFAULT NULL,
  `SETTLEMENT_RATE` decimal(26,8) DEFAULT NULL,
  `ISS_CONV_RATE` decimal(26,8) DEFAULT NULL,
  `TCC` varchar(64) DEFAULT NULL,
  `RC_210` varchar(3) DEFAULT NULL,
  `CARD_ACCEPT_NAME_LOCATION` varchar(40) DEFAULT NULL,
  `CARD_ACCEPT_ID_CODE` varchar(15) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;



CREATE TABLE `ISOMESSAGE_TMP_TURN` (
  `tidb_id` bigint(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,

  `SEQ_NO` bigint(20) NOT NULL,
  `MTI` varchar(12) DEFAULT NULL,
  `CARD_NO` varchar(57) DEFAULT NULL,
  `PROC_CODE` varchar(18) DEFAULT NULL,
  `ORIGINAL_DATE` varchar(30) DEFAULT NULL,
  `TRACE_NO` varchar(18) DEFAULT NULL,
  `REF_NO` varchar(36) DEFAULT NULL,
  `ACQ_ID` varchar(33) DEFAULT NULL,
  `ISS_ID` varchar(33) DEFAULT NULL,
  `APPROVAL_CODE` varchar(18) DEFAULT NULL,
  `RESPONSE_CODE` varchar(9) DEFAULT NULL,
  `TERM_ID` varchar(24) DEFAULT NULL,
  `ORIGINAL_DATA` varchar(4000) DEFAULT NULL,
  `REVERSED` varchar(3) DEFAULT NULL,
  `TNX_STAMP` datetime DEFAULT NULL,
  `PACKAGER` varchar(300) DEFAULT NULL,
  `AMOUNT` bigint(20) DEFAULT NULL,
  `ACCOUNT_NO` varchar(69) DEFAULT NULL,
  `LOCAL_TIME` varchar(18) DEFAULT NULL,
  `LOCAL_DATE` varchar(12) DEFAULT NULL,
  `SETTLE_DATE` varchar(12) DEFAULT NULL,
  `MCC` varchar(12) DEFAULT NULL,
  `CURRENCY_CODE` varchar(9) DEFAULT NULL,
  `DEST_ACCOUNT` varchar(69) DEFAULT NULL,
  `RECONCILE_TIME` datetime DEFAULT NULL,
  `TRANX_DATE` datetime DEFAULT NULL,
  `ADD_INFO` varchar(765) DEFAULT NULL,
  `SERVICE_CODE` varchar(90) DEFAULT NULL,
  `VAS_INFO` varchar(600) DEFAULT NULL,
  `BEN_ID` varchar(33) DEFAULT NULL,
  `OF_YEAR` varchar(4) DEFAULT NULL,
  `ISREV` decimal(18,6) DEFAULT NULL,
  `ORIGRESPCODE` varchar(9) DEFAULT NULL,
  `IBFT_INFO` varchar(300) DEFAULT NULL,
  `AMOUNT_SETTLEMENT` decimal(26,8) DEFAULT NULL,
  `AMOUNT_CARDHOLDER` decimal(26,8) DEFAULT NULL,
  `CURRENCY_CODE_SETTLEMENT` varchar(9) DEFAULT NULL,
  `CURRENCY_CODE_CARDHOLDER` varchar(9) DEFAULT NULL,
  `CONVERSION_RATE_SETTLEMENT` varchar(8) DEFAULT NULL,
  `CONVERSION_RATE_CARDHOLDER` varchar(8) DEFAULT NULL,
  `USER_DEFINE` varchar(60) DEFAULT NULL,
  `TRANX_REF` varchar(16) DEFAULT NULL,
  `ACQ_COUNTRY` decimal(28,2) DEFAULT NULL,
  `POS_ENTRY_CODE` decimal(28,2) DEFAULT NULL,
  `POS_CONDITION_CODE` decimal(28,2) DEFAULT NULL,
  `ADDRESPONSE` varchar(25) DEFAULT NULL,
  `MVV` varchar(20) DEFAULT NULL,
  `F4` decimal(26,8) DEFAULT NULL,
  `F5` decimal(26,8) DEFAULT NULL,
  `F6` decimal(26,8) DEFAULT NULL,
  `F49` decimal(18,6) DEFAULT NULL,
  `SETTLEMENT_CODE` decimal(18,6) DEFAULT NULL,
  `SETTLEMENT_RATE` decimal(26,8) DEFAULT NULL,
  `ISS_CONV_RATE` decimal(26,8) DEFAULT NULL,
  `TCC` varchar(64) DEFAULT NULL,
  `RC_210` varchar(3) DEFAULT NULL,
  `CARD_ACCEPT_NAME_LOCATION` varchar(40) DEFAULT NULL,
  `CARD_ACCEPT_ID_CODE` varchar(15) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;



CREATE TABLE `ISOMESSAGE_TMP_68_TO_FULL` (
  `tidb_id` bigint(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,

  `SEQ_NO` bigint(20) DEFAULT NULL,
  `MTI` varchar(12) DEFAULT NULL,
  `CARD_NO` varchar(57) DEFAULT NULL,
  `PROC_CODE` varchar(18) DEFAULT NULL,
  `ORIGINAL_DATE` varchar(30) DEFAULT NULL,
  `TRACE_NO` varchar(18) DEFAULT NULL,
  `REF_NO` varchar(36) DEFAULT NULL,
  `ACQ_ID` varchar(33) DEFAULT NULL,
  `ISS_ID` varchar(33) DEFAULT NULL,
  `APPROVAL_CODE` varchar(18) DEFAULT NULL,
  `RESPONSE_CODE` varchar(9) DEFAULT NULL,
  `TERM_ID` varchar(24) DEFAULT NULL,
  `ORIGINAL_DATA` varchar(4000) DEFAULT NULL,
  `REVERSED` varchar(3) DEFAULT NULL,
  `TNX_STAMP` datetime DEFAULT NULL,
  `PACKAGER` varchar(300) DEFAULT NULL,
  `AMOUNT` bigint(20) DEFAULT NULL,
  `ACCOUNT_NO` varchar(69) DEFAULT NULL,
  `LOCAL_TIME` varchar(18) DEFAULT NULL,
  `LOCAL_DATE` varchar(12) DEFAULT NULL,
  `SETTLE_DATE` varchar(12) DEFAULT NULL,
  `MCC` varchar(12) DEFAULT NULL,
  `CURRENCY_CODE` varchar(9) DEFAULT NULL,
  `DEST_ACCOUNT` varchar(69) DEFAULT NULL,
  `RECONCILE_TIME` datetime DEFAULT NULL,
  `TRANX_DATE` datetime DEFAULT NULL,
  `ADD_INFO` varchar(765) DEFAULT NULL,
  `SERVICE_CODE` varchar(90) DEFAULT NULL,
  `VAS_INFO` varchar(600) DEFAULT NULL,
  `BEN_ID` varchar(33) DEFAULT NULL,
  `OF_YEAR` varchar(4) DEFAULT NULL,
  `ISREV` decimal(18,6) DEFAULT NULL,
  `ORIGRESPCODE` varchar(9) DEFAULT NULL,
  `IBFT_INFO` varchar(300) DEFAULT NULL,
  `AMOUNT_SETTLEMENT` decimal(26,8) DEFAULT NULL,
  `AMOUNT_CARDHOLDER` decimal(26,8) DEFAULT NULL,
  `CURRENCY_CODE_SETTLEMENT` varchar(9) DEFAULT NULL,
  `CURRENCY_CODE_CARDHOLDER` varchar(9) DEFAULT NULL,
  `CONVERSION_RATE_SETTLEMENT` varchar(8) DEFAULT NULL,
  `CONVERSION_RATE_CARDHOLDER` varchar(8) DEFAULT NULL,
  `USER_DEFINE` varchar(60) DEFAULT NULL,
  `TRANX_REF` varchar(16) DEFAULT NULL,
  `ACQ_COUNTRY` decimal(28,2) DEFAULT NULL,
  `POS_ENTRY_CODE` decimal(28,2) DEFAULT NULL,
  `POS_CONDITION_CODE` decimal(28,2) DEFAULT NULL,
  `ADDRESPONSE` varchar(25) DEFAULT NULL,
  `MVV` varchar(20) DEFAULT NULL,
  `F4` decimal(26,8) DEFAULT NULL,
  `F5` decimal(26,8) DEFAULT NULL,
  `F6` decimal(26,8) DEFAULT NULL,
  `F49` decimal(18,6) DEFAULT NULL,
  `SETTLEMENT_CODE` decimal(18,6) DEFAULT NULL,
  `SETTLEMENT_RATE` decimal(26,8) DEFAULT NULL,
  `ISS_CONV_RATE` decimal(26,8) DEFAULT NULL,
  `TCC` varchar(64) DEFAULT NULL,
  `RC_210` varchar(3) DEFAULT NULL,
  `CARD_ACCEPT_NAME_LOCATION` varchar(40) DEFAULT NULL,
  `CARD_ACCEPT_ID_CODE` varchar(15) DEFAULT NULL,
  `F15_YEAR` datetime DEFAULT NULL,
  `LOCAL_DATE_YEAR` datetime DEFAULT NULL,
  `INSERT_DATE` datetime DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;



CREATE TABLE `SHCLOG_SETT_IBFT` (
  `tidb_id` bigint(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,

  `MSGTYPE` decimal(18,6) NOT NULL,
  `PAN` char(19) DEFAULT NULL,
  `PCODE` decimal(18,6) DEFAULT NULL,
  `AMOUNT` decimal(26,8) DEFAULT NULL,
  `ACQ_CURRENCY_CODE` decimal(18,6) DEFAULT NULL,
  `FEE` decimal(26,8) DEFAULT NULL,
  `NEW_FEE` decimal(26,8) DEFAULT NULL,
  `SETTLEMENT_AMOUNT` decimal(26,8) DEFAULT NULL,
  `TRACE` decimal(18,6) DEFAULT NULL,
  `LOCAL_TIME` decimal(18,6) DEFAULT NULL,
  `LOCAL_DATE` datetime DEFAULT NULL,
  `SETTLEMENT_DATE` datetime NOT NULL,
  `ACQUIRER` decimal(18,6) NOT NULL,
  `ISSUER` decimal(18,6) DEFAULT NULL,
  `RESPCODE` decimal(18,6) DEFAULT NULL,
  `MERCHANT_TYPE` decimal(18,6) DEFAULT NULL,
  `AUTHNUM` char(6) DEFAULT NULL,
  `CH_CURRENCY_CODE` decimal(18,6) DEFAULT NULL,
  `TERMID` char(8) DEFAULT NULL,
  `REFNUM` char(12) DEFAULT NULL,
  `ACCTNUM1` char(60) DEFAULT NULL,
  `CARD_SEQNO` decimal(18,6) DEFAULT NULL,
  `ISS_CURRENCY_CODE` decimal(18,6) DEFAULT NULL,
  `CHIP_INDEX` char(20) DEFAULT NULL,
  `TRANDATE` datetime DEFAULT NULL,
  `TRANTIME` decimal(18,6) DEFAULT NULL,
  `CARDPRODUCT` char(10) DEFAULT NULL,
  `REVCODE` decimal(18,6) DEFAULT NULL,
  `ORIGTRACE` decimal(18,6) DEFAULT NULL,
  `ACCEPTORNAME` char(40) DEFAULT NULL,
  `TERMLOC` char(25) DEFAULT NULL,
  `LOAIGDREVESO` varchar(4) DEFAULT NULL,
  `THAYDOI` char(1) DEFAULT NULL,
  `CONFIG_FEE_ID` decimal(28,0) DEFAULT NULL,
  `TGTP` datetime DEFAULT NULL,
  `TGGUIGD` datetime DEFAULT NULL,
  `TGGUIQT` datetime DEFAULT NULL,
  `TGDDNV` datetime DEFAULT NULL,
  `TGXLNV` datetime DEFAULT NULL,
  `REAMOUNT` decimal(26,8) DEFAULT NULL,
  `RAMOUNT` decimal(26,8) DEFAULT NULL,
  `QAMOUNT` decimal(26,8) DEFAULT NULL,
  `LDDNV` char(1) DEFAULT NULL,
  `FAMOUNT` decimal(26,8) DEFAULT NULL,
  `TGGUINV` datetime DEFAULT NULL,
  `TGGUIQTP` datetime DEFAULT NULL,
  `EDIT_DATE` datetime DEFAULT NULL,
  `EDIT_USER` varchar(60) DEFAULT NULL,
  `SML_VERIFY` char(1) DEFAULT NULL,
  `ORIGISS` char(10) DEFAULT NULL,
  `ORIGRESPCODE` decimal(18,6) DEFAULT NULL,
  `STT` decimal(18,6) NOT NULL,
  `ISREV` decimal(18,6) DEFAULT NULL,
  `PREAMOUNT` decimal(26,8) DEFAULT NULL,
  `CAP_DATE` datetime DEFAULT NULL,
  `FEE_ISS` decimal(26,8) DEFAULT NULL,
  `FEE_ACQ` decimal(26,8) DEFAULT NULL,
  `INS_PCODE` decimal(18,6) DEFAULT NULL,
  `CONV_RATE` decimal(26,8) DEFAULT NULL,
  `FEE_REC_AT` decimal(26,8) DEFAULT NULL,
  `FEE_PAY_AT` decimal(26,8) DEFAULT NULL,
  `FEE_REC_DF` decimal(26,8) DEFAULT NULL,
  `FEE_PAY_DF` decimal(26,8) DEFAULT NULL,
  `EDIT_DATE_INS` datetime DEFAULT NULL,
  `ENTITYID` decimal(18,6) DEFAULT NULL,
  `TRANSACTION_AMOUNT` decimal(26,8) DEFAULT NULL,
  `CARDHOLDER_AMOUNT` decimal(26,8) DEFAULT NULL,
  `CARDHOLDER_CONV_RATE` decimal(18,6) DEFAULT NULL,
  `BB_BIN` decimal(18,6) DEFAULT NULL,
  `FORWARD_INST` decimal(18,6) DEFAULT NULL,
  `TRANSFEREE` decimal(26,8) DEFAULT NULL,
  `SETT_CURRENCY_CODE` decimal(18,6) DEFAULT NULL,
  `PRE_CARDHOLDER_AMOUNT` decimal(26,8) DEFAULT NULL,
  `REPAY_USD` decimal(26,8) DEFAULT NULL,
  `CONV_RATE_ACQ` decimal(26,8) DEFAULT NULL,
  `TERMID_ACQ` char(16) DEFAULT NULL,
  `SHCERROR` decimal(18,6) DEFAULT NULL,
  `MERCHANT_TYPE_ORIG` decimal(18,6) DEFAULT NULL,
  `BB_ACCOUNT` varchar(60) DEFAULT NULL,
  `FEE_SERVICE` decimal(26,8) DEFAULT NULL,
  `SENDER_ACC` varchar(28) DEFAULT NULL,
  `BNB_ACC` varchar(28) DEFAULT NULL,
  `SENDER_SWC` varchar(12) DEFAULT NULL,
  `BNB_SWC` varchar(12) DEFAULT NULL,
  `CONTENT_FUND` varchar(999) DEFAULT NULL,
  `RESPCODE_GW` varchar(2) DEFAULT NULL,
  `ACCTNUM` char(70) DEFAULT NULL,
  `FROM_SML` varchar(1) DEFAULT NULL,
  `ORIGINATOR` char(10) DEFAULT NULL,
  `ORIG_ACQ` decimal(18,6) DEFAULT NULL,
  `FEE_NOTE` varchar(500) DEFAULT NULL,
  `ONLY_SML` varchar(20) DEFAULT NULL,
  `ACQUIRER_FE` decimal(18,6) DEFAULT NULL,
  `ACQUIRER_RP` decimal(18,6) DEFAULT NULL,
  `ISSUER_FE` decimal(18,6) DEFAULT NULL,
  `ISSUER_RP` decimal(18,6) DEFAULT NULL,
  `FEE_KEY` varchar(50) DEFAULT NULL,
  `ACQ_RQ` decimal(18,6) DEFAULT NULL,
  `ISS_RQ` decimal(18,6) DEFAULT NULL,
  `FROM_SYS` varchar(10) DEFAULT NULL,
  `PCODE2` decimal(18,6) DEFAULT NULL,
  `BB_BIN_ORIG` decimal(18,6) DEFAULT NULL,
  `TXNSRC` varchar(30) DEFAULT NULL,
  `TXNDEST` varchar(30) DEFAULT NULL,
  `SRC` varchar(3) DEFAULT NULL,
  `DES` varchar(3) DEFAULT NULL,
  `TRAN_CASE` varchar(10) DEFAULT NULL,
  `PCODE_ORIG` decimal(18,6) DEFAULT NULL,
  `RC_ISS_72` decimal(18,6) DEFAULT NULL,
  `RC_ACQ_72` decimal(18,6) DEFAULT NULL,
  `RC_ISS` varchar(4) DEFAULT NULL,
  `RC_BEN` varchar(4) DEFAULT NULL,
  `RC_ACQ` varchar(4) DEFAULT NULL,
  `NAPAS_DATE` datetime DEFAULT NULL,
  `NAPAS_EDIT_DATE` datetime DEFAULT NULL,
  `NAPAS_EDIT_DATE_INS` datetime DEFAULT NULL,
  `NAPAS_ND_DATE` datetime DEFAULT NULL,
  `REASON_EDIT` varchar(200) DEFAULT NULL,
  `ACQ_COUNTRY` decimal(28,2) DEFAULT NULL,
  `POS_ENTRY_CODE` decimal(28,2) DEFAULT NULL,
  `POS_CONDITION_CODE` decimal(28,2) DEFAULT NULL,
  `ADDRESPONSE` varchar(25) DEFAULT NULL,
  `MVV` varchar(20) DEFAULT NULL,
  `TERMID1` char(30) DEFAULT NULL,
  `FEE_IRF_ISS` decimal(18,6) DEFAULT NULL,
  `FEE_SVF_ISS` decimal(18,6) DEFAULT NULL,
  `FEE_IRF_ACQ` decimal(18,6) DEFAULT NULL,
  `FEE_SVF_ACQ` decimal(18,6) DEFAULT NULL,
  `FEE_IRF_PAY_AT` decimal(18,6) DEFAULT NULL,
  `FEE_SVF_PAY_AT` decimal(18,6) DEFAULT NULL,
  `FEE_IRF_REC_AT` decimal(18,6) DEFAULT NULL,
  `FEE_SVF_REC_AT` decimal(18,6) DEFAULT NULL,
  `FEE_IRF_BEN` decimal(18,6) DEFAULT NULL,
  `FEE_SVF_BEN` decimal(18,6) DEFAULT NULL,
  `TOKEN` varchar(50) DEFAULT NULL,
  `RC` decimal(18,6) DEFAULT NULL,
  `SETTLEMENT_CODE` decimal(18,6) DEFAULT NULL,
  `SETTLEMENT_RATE` decimal(26,8) DEFAULT NULL,
  `ISS_CONV_RATE` decimal(26,8) DEFAULT NULL,
  `F49` decimal(18,6) DEFAULT NULL,
  `F5` decimal(26,8) DEFAULT NULL,
  `F4` decimal(26,8) DEFAULT NULL,
  `F6` decimal(26,8) DEFAULT NULL,
  `F15` datetime DEFAULT NULL,
  `TCC` varchar(64) DEFAULT NULL,
  `PREAMOUNT_USD` decimal(26,8) DEFAULT NULL,
  `ACQUIRER_REF` varchar(30) DEFAULT NULL,
  `TXN_START_TIME` decimal(18,6) DEFAULT NULL,
  `TXN_END_TIME` decimal(18,6) DEFAULT NULL,
  `ACH_RECONCIL_STATUS` varchar(70) DEFAULT NULL,
  `ISSUER_DATA` varchar(128) DEFAULT NULL,
  `PREAMOUNT_ACQ` decimal(18,6) DEFAULT NULL,
  `CODE_REF` decimal(18,6) DEFAULT NULL,
  `ADD_INFO` varchar(450) DEFAULT NULL,
  `ACH_EDIT_DATE` datetime DEFAULT NULL,
  `DEVICE_FEE` decimal(26,8) DEFAULT NULL,
  `STT_ORIG` decimal(18,6) DEFAULT NULL,
  `PREAMOUNT_TRANX` decimal(18,6) DEFAULT NULL,
  `F60_UPI` varchar(60) DEFAULT NULL,
  `F100_UPI` varchar(33) DEFAULT NULL,
  `IS_PARTIAL_SYNC` decimal(18,6) DEFAULT NULL,
  `IS_PART_REV` decimal(18,6) DEFAULT NULL,
  `ENDTOENDID` varchar(35) DEFAULT NULL,
  `MSGID` varchar(35) DEFAULT NULL,
  `INSTRID` varchar(35) DEFAULT NULL,
  `MA_TLTO` varchar(3) DEFAULT NULL,
  `DATE_XL_TLTO` datetime DEFAULT NULL,
  `FEE_IRF_QT` decimal(18,6) DEFAULT NULL,
  `FEE_SVF_QT` decimal(18,6) DEFAULT NULL,
  `TRACK2_SERVICE_CODE` varchar(50) DEFAULT NULL,
  `NSPK_F5` decimal(26,8) DEFAULT NULL,
  `TRANSIT_CSRR` varchar(1) DEFAULT NULL,
  `SEQUENCE_IN_MONTH` decimal(18,6) DEFAULT NULL,
  `ACCOUNT_NO` varchar(69) DEFAULT NULL,
  `DEST_ACCOUNT` varchar(69) DEFAULT NULL,
  `MERCHANT_CODE` varchar(96) DEFAULT NULL,
  `MSGTYPE_DETAIL` varchar(10) DEFAULT NULL,
  `F90` varchar(43) DEFAULT NULL,
  `TOKEN_REQUESTOR` varchar(10) DEFAULT NULL,
  `FEE_PACKAGE_TYPE` varchar(15) DEFAULT NULL,
  `INS_TYPE_FEE` varchar(4) DEFAULT NULL,
  `FEE_IRF_ISS_NO_VAT` decimal(18,6) DEFAULT '0',
  `FEE_SVF_ISS_NO_VAT` decimal(18,6) DEFAULT '0',
  `FEE_IRF_ACQ_NO_VAT` decimal(18,6) DEFAULT '0',
  `FEE_SVF_ACQ_NO_VAT` decimal(18,6) DEFAULT '0',
  `FEE_IRF_BEN_NO_VAT` decimal(28,8) DEFAULT NULL,
  `FEE_SVF_BEN_NO_VAT` decimal(28,8) DEFAULT NULL,
  `SVFISSNP` decimal(26,8) DEFAULT NULL,
  `IRFISSACQ` decimal(26,8) DEFAULT NULL,
  `IRFISSBNB` decimal(26,8) DEFAULT NULL,
  `SVFACQNP` decimal(26,8) DEFAULT NULL,
  `IRFACQISS` decimal(26,8) DEFAULT NULL,
  `IRFACQBNB` decimal(26,8) DEFAULT NULL,
  `SVFBNBNP` decimal(26,8) DEFAULT NULL,
  `IRFBNBISS` decimal(26,8) DEFAULT NULL,
  `IRFBNBACQ` decimal(26,8) DEFAULT NULL,
  `PPCODE` decimal(18,6) DEFAULT NULL,
  `DATA_ID` decimal(18,6) NOT NULL,

  KEY `IDTT_SETT_IBFT` (`STT`),
  KEY `SHCLOG_ACQUIRER_RP_SETT_IBFT` (`ACQUIRER_RP`),
  KEY `SHCLOG_BB_BIN_SETT_IBFT` (`BB_BIN`),
  KEY `SHCLOG_ISSUER_RP_SETT_IBFT` (`ISSUER_RP`),
  KEY `SHCLOG_OTRACE2_SETT_IBFT` (`ORIGTRACE`),
  UNIQUE KEY `uk_ibft_merge` (`PAN`,`ORIGTRACE`,`TERMID`,`LOCAL_DATE`,`LOCAL_TIME`,`ACQUIRER`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;



CREATE TABLE `SHCLOG_SETT_IBFT_ADJUST` (
  `tidb_id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'Khóa chính tự tăng để tối ưu hiệu suất và phân trang',

  `MSGTYPE` decimal(18,6) DEFAULT NULL,
  `PAN` char(19) DEFAULT NULL,
  `PCODE` char(2) DEFAULT NULL,
  `AMOUNT` decimal(26,8) DEFAULT NULL,
  `ACQ_CURRENCY_CODE` decimal(18,6) DEFAULT NULL,
  `FEE_ISS` decimal(26,8) DEFAULT NULL,
  `FEE_ACQ` decimal(26,8) DEFAULT NULL,
  `TRACE` decimal(18,6) DEFAULT NULL,
  `LOCAL_TIME` decimal(18,6) DEFAULT NULL,
  `LOCAL_DATE` datetime DEFAULT NULL,
  `SETTLEMENT_DATE` datetime DEFAULT NULL,
  `ACQUIRER` char(6) DEFAULT NULL,
  `ISSUER` char(6) DEFAULT NULL,
  `RESPCODE` decimal(18,6) DEFAULT NULL,
  `MERCHANT_TYPE` decimal(18,6) DEFAULT NULL,
  `CH_CURRENCY_CODE` decimal(18,6) DEFAULT NULL,
  `TERMID` char(8) DEFAULT NULL,
  `ACCTNUM` char(70) DEFAULT NULL,
  `ISS_CURRENCY_CODE` decimal(18,6) DEFAULT NULL,
  `TRANDATE` datetime DEFAULT NULL,
  `TRANTIME` decimal(18,6) DEFAULT NULL,
  `CARDPRODUCT` char(10) DEFAULT NULL,
  `REVCODE` decimal(18,6) DEFAULT NULL,
  `ORIGTRACE` decimal(18,6) DEFAULT NULL,
  `ACCEPTORNAME` char(40) DEFAULT NULL,
  `TERMLOC` char(25) DEFAULT NULL,
  `TGGUIQT` datetime DEFAULT NULL,
  `TGXLNV` datetime DEFAULT NULL,
  `TGGUINV` datetime DEFAULT NULL,
  `TGGUIQTP` datetime DEFAULT NULL,
  `EDIT_DATE` datetime DEFAULT NULL,
  `EDIT_USER` varchar(60) DEFAULT NULL,
  `SML_VERIFY` char(1) DEFAULT NULL,
  `ORIGISS` char(10) DEFAULT NULL,
  `ORIGRESPCODE` decimal(18,6) DEFAULT NULL,
  `ISREV` decimal(18,6) DEFAULT NULL,
  `PREAMOUNT` decimal(18,6) DEFAULT NULL,
  `CAP_DATE` datetime DEFAULT NULL,
  `AUTHNUM` char(6) DEFAULT NULL,
  `THU` decimal(18,6) DEFAULT NULL,
  `THU_REFUN` decimal(18,6) DEFAULT NULL,
  `TT1` decimal(18,6) DEFAULT NULL,
  `TT2` decimal(18,6) DEFAULT NULL,
  `TT3` decimal(18,6) DEFAULT NULL,
  `TT4` decimal(18,6) DEFAULT NULL,
  `PPCODE` decimal(18,6) DEFAULT NULL,
  `SETTLEMENT_AMOUNT` decimal(26,8) DEFAULT NULL,
  `CARDHOLDER_AMOUNT` decimal(26,8) DEFAULT NULL,
  `SETTLEMENT_CONV_RATE` decimal(26,8) DEFAULT NULL,
  `CARDHOLDER_CONV_RATE` decimal(18,6) DEFAULT NULL,
  `BB_BIN` decimal(18,6) DEFAULT NULL,
  `FORWARD_INST` decimal(18,6) DEFAULT NULL,
  `TRANSFEREE` decimal(26,8) DEFAULT NULL,
  `REFNUM` char(12) DEFAULT NULL,
  `SETT_CURRENCY_CODE` decimal(18,6) DEFAULT NULL,
  `PRE_CARDHOLDER_AMOUNT` decimal(26,8) DEFAULT NULL,
  `MERCHANT_TYPE_ORIG` decimal(18,6) DEFAULT NULL,
  `ONLY_SML` varchar(2) DEFAULT NULL,
  `FEE_NOTE` varchar(500) DEFAULT NULL,
  `ACQUIRER_FE` decimal(18,6) DEFAULT NULL,
  `ACQUIRER_RP` decimal(18,6) DEFAULT NULL,
  `ISSUER_FE` decimal(18,6) DEFAULT NULL,
  `ISSUER_RP` decimal(18,6) DEFAULT NULL,
  `RC_ISS_72` decimal(18,6) DEFAULT NULL,
  `RC_ACQ_72` decimal(18,6) DEFAULT NULL,
  `PCODE2` decimal(18,6) DEFAULT NULL,
  `FROM_SYS` varchar(10) DEFAULT NULL,
  `TRAN_CASE` varchar(10) DEFAULT NULL,
  `BB_BIN_ORIG` decimal(18,6) DEFAULT NULL,
  `SRC` varchar(30) DEFAULT NULL,
  `DES` varchar(3) DEFAULT NULL,
  `PCODE_ORIG` decimal(18,6) DEFAULT NULL,
  `RC_ISS` varchar(4) DEFAULT NULL,
  `RC_BEN` varchar(4) DEFAULT NULL,
  `NAPAS_DATE` datetime DEFAULT NULL,
  `NAPAS_EDIT_DATE` datetime DEFAULT NULL,
  `ADDRESPONSE` varchar(25) DEFAULT NULL,
  `MVV` varchar(20) DEFAULT NULL,
  `STT` decimal(18,6) DEFAULT NULL,

  `FEE_IRF_ISS` decimal(18,6) NOT NULL DEFAULT 0,
  `FEE_SVF_ISS` decimal(18,6) NOT NULL DEFAULT 0,
  `FEE_IRF_ACQ` decimal(18,6) NOT NULL DEFAULT 0,
  `FEE_SVF_ACQ` decimal(18,6) NOT NULL DEFAULT 0,
  `FEE_IRF_PAY_AT` decimal(18,6) NOT NULL DEFAULT 0,
  `FEE_SVF_PAY_AT` decimal(18,6) NOT NULL DEFAULT 0,
  `FEE_IRF_REC_AT` decimal(18,6) NOT NULL DEFAULT 0,
  `FEE_SVF_REC_AT` decimal(18,6) NOT NULL DEFAULT 0,
  `FEE_IRF_BEN` decimal(28,8) DEFAULT NULL,
  `FEE_SVF_BEN` decimal(28,8) DEFAULT NULL,

  `POS_CONDITION_CODE` decimal(18,6) NOT NULL DEFAULT 0,
  `POS_ENTRY_CODE` decimal(18,6) NOT NULL DEFAULT 0,

  `TCC` varchar(64) DEFAULT '',
  `FEE_KEY` varchar(50) DEFAULT NULL,
  `ACQ_COUNTRY` decimal(28,2) DEFAULT NULL,
  `TERMID1` char(30) DEFAULT NULL,
  `TOKEN` varchar(50) DEFAULT NULL,
  `RC` decimal(18,6) DEFAULT NULL,
  `SETTLEMENT_CODE` decimal(18,6) DEFAULT NULL,
  `SETTLEMENT_RATE` decimal(26,8) DEFAULT NULL,
  `ISS_CONV_RATE` decimal(26,8) DEFAULT NULL,
  `F49` decimal(18,6) DEFAULT NULL,
  `F5` decimal(26,8) DEFAULT NULL,
  `F4` decimal(26,8) DEFAULT NULL,
  `F6` decimal(26,8) DEFAULT NULL,
  `SVFISSNP` decimal(26,8) DEFAULT NULL,
  `IRFISSACQ` decimal(26,8) DEFAULT NULL,
  `IRFISSBNB` decimal(26,8) DEFAULT NULL,
  `SVFACQNP` decimal(26,8) DEFAULT NULL,
  `IRFACQISS` decimal(26,8) DEFAULT NULL,
  `IRFACQBNB` decimal(26,8) DEFAULT NULL,
  `SVFBNBNP` decimal(26,8) DEFAULT NULL,
  `IRFBNBISS` decimal(26,8) DEFAULT NULL,
  `IRFBNBACQ` decimal(26,8) DEFAULT NULL,
  `RE_FEE` decimal(18,6) DEFAULT NULL,
  `ISS_SEND` varchar(1) DEFAULT '0',
  `ACQ_SEND` varchar(1) DEFAULT '0',
  `BNB_SEND` varchar(1) DEFAULT '0',
  `TXNSRC` varchar(30) DEFAULT NULL,
  `TXNDEST` varchar(30) DEFAULT NULL,
  `PREAMOUNT_USD` decimal(26,8) DEFAULT NULL,
  `CONTENT_FUND` varchar(300) DEFAULT NULL,
  `DATA_ID` decimal(18,6) DEFAULT NULL,
  `ADD_INFO` varchar(450) DEFAULT NULL,
  `PREAMOUNT_ACQ` decimal(26,8) DEFAULT NULL,
  `F60_UPI` varchar(60) DEFAULT NULL,
  `F100_UPI` varchar(33) DEFAULT NULL,
  `IS_PART_REV` decimal(18,6) DEFAULT NULL,
  `TRANSIT_CSRR` char(1) DEFAULT NULL,
  `MSGTYPE_DETAIL` varchar(10) DEFAULT NULL,

  PRIMARY KEY (`tidb_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;



CREATE TABLE `SHCLOG_SETT_IST` (
  `tidb_id` bigint(20) NOT NULL AUTO_INCREMENT PRIMARY KEY,

  `MSGTYPE` decimal(18,6) DEFAULT NULL,
  `PAN` char(19) DEFAULT NULL,
  `PCODE` decimal(18,6) DEFAULT NULL,
  `AMOUNT` decimal(26,8) DEFAULT NULL,
  `ACQ_CURRENCY_CODE` decimal(18,6) DEFAULT NULL,
  `FEE` decimal(26,8) DEFAULT NULL,
  `NEW_FEE` decimal(26,8) DEFAULT NULL,
  `SETTLEMENT_AMOUNT` decimal(26,8) DEFAULT NULL,
  `TRACE` decimal(18,6) DEFAULT NULL,
  `LOCAL_TIME` decimal(18,6) DEFAULT NULL,
  `LOCAL_DATE` datetime DEFAULT NULL,
  `SETTLEMENT_DATE` datetime DEFAULT NULL,
  `ACQUIRER` decimal(18,6) DEFAULT NULL,
  `ISSUER` decimal(18,6) DEFAULT NULL,
  `RESPCODE` decimal(18,6) DEFAULT NULL,
  `MERCHANT_TYPE` decimal(18,6) DEFAULT NULL,
  `AUTHNUM` char(6) DEFAULT NULL,
  `CH_CURRENCY_CODE` decimal(18,6) DEFAULT NULL,
  `TERMID` char(8) DEFAULT NULL,
  `REFNUM` char(12) DEFAULT NULL,
  `ACCTNUM1` char(60) DEFAULT NULL,
  `CARD_SEQNO` decimal(18,6) DEFAULT NULL,
  `ISS_CURRENCY_CODE` decimal(18,6) DEFAULT NULL,
  `CHIP_INDEX` char(20) DEFAULT NULL,
  `TRANDATE` datetime DEFAULT NULL,
  `TRANTIME` decimal(18,6) DEFAULT NULL,
  `CARDPRODUCT` char(10) DEFAULT NULL,
  `REVCODE` decimal(18,6) DEFAULT NULL,
  `ORIGTRACE` decimal(18,6) DEFAULT NULL,
  `ACCEPTORNAME` char(40) DEFAULT NULL,
  `TERMLOC` char(25) DEFAULT NULL,
  `LOAIGDREVESO` varchar(4) DEFAULT NULL,
  `THAYDOI` char(1) DEFAULT NULL,
  `CONFIG_FEE_ID` decimal(28,0) DEFAULT NULL,
  `TGTP` datetime DEFAULT NULL,
  `TGGUIGD` datetime DEFAULT NULL,
  `TGGUIQT` datetime DEFAULT NULL,
  `TGDDNV` datetime DEFAULT NULL,
  `TGXLNV` datetime DEFAULT NULL,
  `REAMOUNT` decimal(26,8) DEFAULT NULL,
  `RAMOUNT` decimal(26,8) DEFAULT NULL,
  `QAMOUNT` decimal(26,8) DEFAULT NULL,
  `LDDNV` char(1) DEFAULT NULL,
  `FAMOUNT` decimal(26,8) DEFAULT NULL,
  `TGGUINV` datetime DEFAULT NULL,
  `TGGUIQTP` datetime DEFAULT NULL,
  `EDIT_DATE` datetime DEFAULT NULL,
  `EDIT_USER` varchar(60) DEFAULT NULL,
  `SML_VERIFY` char(1) DEFAULT NULL,
  `ORIGISS` char(10) DEFAULT NULL,
  `ORIGRESPCODE` decimal(18,6) DEFAULT NULL,
  `STT` decimal(18,6) DEFAULT NULL,
  `ISREV` decimal(18,6) DEFAULT NULL,
  `PREAMOUNT` decimal(26,8) DEFAULT NULL,
  `CAP_DATE` datetime DEFAULT NULL,
  `FEE_ISS` decimal(26,8) DEFAULT NULL,
  `FEE_ACQ` decimal(26,8) DEFAULT NULL,
  `INS_PCODE` decimal(18,6) DEFAULT NULL,
  `CONV_RATE` decimal(26,8) DEFAULT NULL,
  `FEE_REC_AT` decimal(26,8) DEFAULT NULL,
  `FEE_PAY_AT` decimal(26,8) DEFAULT NULL,
  `FEE_REC_DF` decimal(26,8) DEFAULT NULL,
  `FEE_PAY_DF` decimal(26,8) DEFAULT NULL,
  `EDIT_DATE_INS` datetime DEFAULT NULL,
  `ENTITYID` decimal(18,6) DEFAULT NULL,
  `TRANSACTION_AMOUNT` decimal(26,8) DEFAULT NULL,
  `CARDHOLDER_AMOUNT` decimal(26,8) DEFAULT NULL,
  `CARDHOLDER_CONV_RATE` decimal(18,6) DEFAULT NULL,
  `BB_BIN` decimal(18,6) DEFAULT NULL,
  `FORWARD_INST` decimal(18,6) DEFAULT NULL,
  `TRANSFEREE` decimal(26,8) DEFAULT NULL,
  `SETT_CURRENCY_CODE` decimal(18,6) DEFAULT NULL,
  `PRE_CARDHOLDER_AMOUNT` decimal(26,8) DEFAULT NULL,
  `REPAY_USD` decimal(26,8) DEFAULT NULL,
  `CONV_RATE_ACQ` decimal(26,8) DEFAULT NULL,
  `TERMID_ACQ` char(16) DEFAULT NULL,
  `SHCERROR` decimal(18,6) DEFAULT NULL,
  `MERCHANT_TYPE_ORIG` decimal(18,6) DEFAULT NULL,
  `BB_ACCOUNT` varchar(60) DEFAULT NULL,
  `FEE_SERVICE` decimal(26,8) DEFAULT NULL,
  `SENDER_ACC` varchar(28) DEFAULT NULL,
  `BNB_ACC` varchar(28) DEFAULT NULL,
  `SENDER_SWC` varchar(12) DEFAULT NULL,
  `BNB_SWC` varchar(12) DEFAULT NULL,
  `CONTENT_FUND` varchar(999) DEFAULT NULL,
  `RESPCODE_GW` varchar(2) DEFAULT NULL,
  `ACCTNUM` char(70) DEFAULT NULL,
  `FROM_SML` varchar(1) DEFAULT NULL,
  `ORIGINATOR` char(10) DEFAULT NULL,
  `ORIG_ACQ` decimal(18,6) DEFAULT NULL,
  `FEE_NOTE` varchar(500) DEFAULT NULL,
  `ONLY_SML` varchar(20) DEFAULT NULL,
  `ACQUIRER_FE` decimal(18,6) DEFAULT NULL,
  `ACQUIRER_RP` decimal(18,6) DEFAULT NULL,
  `ISSUER_FE` decimal(18,6) DEFAULT NULL,
  `ISSUER_RP` decimal(18,6) DEFAULT NULL,
  `FEE_KEY` varchar(50) DEFAULT NULL,
  `ACQ_RQ` decimal(18,6) DEFAULT NULL,
  `ISS_RQ` decimal(18,6) DEFAULT NULL,
  `FROM_SYS` varchar(10) DEFAULT NULL,
  `PCODE2` decimal(18,6) DEFAULT NULL,
  `BB_BIN_ORIG` decimal(18,6) DEFAULT NULL,
  `TXNSRC` varchar(30) DEFAULT NULL,
  `TXNDEST` varchar(30) DEFAULT NULL,
  `SRC` varchar(3) DEFAULT NULL,
  `DES` varchar(3) DEFAULT NULL,
  `TRAN_CASE` varchar(10) DEFAULT NULL,
  `PCODE_ORIG` decimal(18,6) DEFAULT NULL,
  `RC_ISS_72` decimal(18,6) DEFAULT NULL,
  `RC_ACQ_72` decimal(18,6) DEFAULT NULL,
  `RC_ISS` varchar(4) DEFAULT NULL,
  `RC_BEN` varchar(4) DEFAULT NULL,
  `RC_ACQ` varchar(4) DEFAULT NULL,
  `NAPAS_DATE` datetime DEFAULT NULL,
  `NAPAS_EDIT_DATE` datetime DEFAULT NULL,
  `NAPAS_EDIT_DATE_INS` datetime DEFAULT NULL,
  `NAPAS_ND_DATE` datetime DEFAULT NULL,
  `REASON_EDIT` varchar(200) DEFAULT NULL,
  `ACQ_COUNTRY` decimal(28,2) DEFAULT NULL,
  `POS_ENTRY_CODE` decimal(28,2) DEFAULT NULL,
  `POS_CONDITION_CODE` decimal(28,2) DEFAULT NULL,
  `ADDRESPONSE` varchar(25) DEFAULT NULL,
  `MVV` varchar(20) DEFAULT NULL,
  `TERMID1` char(30) DEFAULT NULL,
  `FEE_IRF_ISS` decimal(18,6) DEFAULT NULL,
  `FEE_SVF_ISS` decimal(18,6) DEFAULT NULL,
  `FEE_IRF_ACQ` decimal(18,6) DEFAULT NULL,
  `FEE_SVF_ACQ` decimal(18,6) DEFAULT NULL,
  `FEE_IRF_PAY_AT` decimal(18,6) DEFAULT NULL,
  `FEE_SVF_PAY_AT` decimal(18,6) DEFAULT NULL,
  `FEE_IRF_REC_AT` decimal(18,6) DEFAULT NULL,
  `FEE_SVF_REC_AT` decimal(18,6) DEFAULT NULL,
  `FEE_IRF_BEN` decimal(18,6) DEFAULT NULL,
  `FEE_SVF_BEN` decimal(18,6) DEFAULT NULL,
  `TOKEN` varchar(50) DEFAULT NULL,
  `RC` decimal(18,6) DEFAULT NULL,
  `SETTLEMENT_CODE` decimal(18,6) DEFAULT NULL,
  `SETTLEMENT_RATE` decimal(26,8) DEFAULT NULL,
  `ISS_CONV_RATE` decimal(26,8) DEFAULT NULL,
  `F49` decimal(18,6) DEFAULT NULL,
  `F5` decimal(26,8) DEFAULT NULL,
  `F4` decimal(26,8) DEFAULT NULL,
  `F6` decimal(26,8) DEFAULT NULL,
  `F15` datetime DEFAULT NULL,
  `TCC` varchar(64) DEFAULT NULL,
  `PREAMOUNT_USD` decimal(26,8) DEFAULT NULL,
  `ACQUIRER_REF` varchar(30) DEFAULT NULL,
  `TXN_START_TIME` decimal(18,6) DEFAULT NULL,
  `TXN_END_TIME` decimal(18,6) DEFAULT NULL,
  `ACH_RECONCIL_STATUS` varchar(70) DEFAULT NULL,
  `ISSUER_DATA` varchar(128) DEFAULT NULL,
  `PREAMOUNT_ACQ` decimal(18,6) DEFAULT NULL,
  `CODE_REF` decimal(18,6) DEFAULT NULL,
  `ADD_INFO` varchar(450) DEFAULT NULL,
  `ACH_EDIT_DATE` datetime DEFAULT NULL,
  `DEVICE_FEE` decimal(26,8) DEFAULT NULL,
  `STT_ORIG` decimal(18,6) DEFAULT NULL,
  `PREAMOUNT_TRANX` decimal(18,6) DEFAULT NULL,
  `F60_UPI` varchar(60) DEFAULT NULL,
  `F100_UPI` varchar(33) DEFAULT NULL,
  `IS_PARTIAL_SYNC` decimal(18,6) DEFAULT NULL,
  `IS_PART_REV` decimal(18,6) DEFAULT NULL,
  `ENDTOENDID` varchar(35) DEFAULT NULL,
  `MSGID` varchar(35) DEFAULT NULL,
  `INSTRID` varchar(35) DEFAULT NULL,
  `MA_TLTO` varchar(3) DEFAULT NULL,
  `DATE_XL_TLTO` datetime DEFAULT NULL,
  `FEE_IRF_QT` decimal(18,6) DEFAULT NULL,
  `FEE_SVF_QT` decimal(18,6) DEFAULT NULL,
  `TRACK2_SERVICE_CODE` varchar(50) DEFAULT NULL,
  `NSPK_F5` decimal(26,8) DEFAULT NULL,
  `TRANSIT_CSRR` varchar(1) DEFAULT NULL,
  `SEQUENCE_IN_MONTH` decimal(18,6) DEFAULT NULL,
  `ACCOUNT_NO` varchar(69) DEFAULT NULL,
  `DEST_ACCOUNT` varchar(69) DEFAULT NULL,
  `MERCHANT_CODE` varchar(96) DEFAULT NULL,
  `MSGTYPE_DETAIL` varchar(10) DEFAULT NULL,
  `F90` varchar(43) DEFAULT NULL,
  `TOKEN_REQUESTOR` varchar(10) DEFAULT NULL,
  `FEE_IRF_ISS_NO_VAT` decimal(18,6) DEFAULT '0',
  `FEE_SVF_ISS_NO_VAT` decimal(18,6) DEFAULT '0',
  `FEE_IRF_ACQ_NO_VAT` decimal(18,6) DEFAULT '0',
  `FEE_SVF_ACQ_NO_VAT` decimal(18,6) DEFAULT '0',
  `FEE_IRF_BEN_NO_VAT` decimal(28,8) DEFAULT NULL,
  `FEE_SVF_BEN_NO_VAT` decimal(28,8) DEFAULT NULL,
  `SVFISSNP` decimal(26,8) DEFAULT NULL,
  `IRFISSACQ` decimal(26,8) DEFAULT NULL,
  `IRFISSBNB` decimal(26,8) DEFAULT NULL,
  `SVFACQNP` decimal(26,8) DEFAULT NULL,
  `IRFACQISS` decimal(26,8) DEFAULT NULL,
  `IRFACQBNB` decimal(26,8) DEFAULT NULL,
  `SVFBNBNP` decimal(26,8) DEFAULT NULL,
  `IRFBNBISS` decimal(26,8) DEFAULT NULL,
  `IRFBNBACQ` decimal(26,8) DEFAULT NULL,
  `PPCODE` decimal(18,6) DEFAULT NULL,
  `DATA_ID` decimal(18,6) DEFAULT NULL,

  KEY `IDTT_SETT_IST` (`STT`),
  KEY `SHCLOG_ACQUIRER_RP_SETT_IST` (`ACQUIRER_RP`),
  KEY `SHCLOG_ISSUER_RP_SETT_IST` (`ISSUER_RP`),
  KEY `SHCLOG_OTRACE2_SETT_IST` (`ORIGTRACE`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;




CREATE TABLE TGTT_CONFIG (
  tidb_id BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY COMMENT 'Khóa chính tự tăng',

  TGTT_ID VARCHAR(20) DEFAULT NULL,
  TGTT_NAME VARCHAR(200) DEFAULT NULL,
  REPORT_BANK VARCHAR(20) DEFAULT NULL,
  TGTT_SHORT VARCHAR(20) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;


CREATE TABLE CITAD_MERGE (
  tidb_id BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY COMMENT 'Khóa chính tự tăng',

  CF_DATE DATETIME DEFAULT NULL,
  CF_USER VARCHAR(30) DEFAULT NULL,
  BANK_ID BIGINT DEFAULT NULL,
  MERGE_TO BIGINT DEFAULT NULL,
  IS_ACTIVE VARCHAR(1) DEFAULT NULL,
  DEL_USER VARCHAR(30) DEFAULT NULL,
  DEL_DATE DATETIME DEFAULT NULL,
  STT BIGINT DEFAULT NULL,
  APP_DATE DATETIME DEFAULT NULL,
  ATTACH_FILE VARCHAR(100) DEFAULT NULL,
  PASS_DATE DATETIME DEFAULT NULL,
  PASS_USER VARCHAR(30) DEFAULT NULL,
  EDIT_DATE DATETIME DEFAULT NULL,
  EDIT_USER VARCHAR(30) DEFAULT NULL,
  PASS_EDIT_DATE DATETIME DEFAULT NULL,
  PASS_EDIT_USER VARCHAR(30) DEFAULT NULL,
  END_DATE DATETIME DEFAULT NULL,
  FILEFORMAT VARCHAR(200) DEFAULT NULL,
  FILE2 LONGBLOB DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;



CREATE TABLE TGTT_20 (
  tidb_id BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY COMMENT 'Khóa chính tự tăng',

  TGTT_ID VARCHAR(20) DEFAULT NULL,
  TGTT_NAME VARCHAR(200) DEFAULT NULL,
  TGTT_SHORT VARCHAR(20) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;



CREATE OR REPLACE VIEW GET_LIQUIDITY_BANK AS
SELECT DISTINCT column_value
FROM (
  /* Nhóm bank “Hiệu lực” */
  SELECT clr.bank_id AS column_value
  FROM citad_liquidity_risk clr
  WHERE clr.status = 'Hiệu lực'
    AND NOW() > clr.app_date        -- nếu app_date là DATETIME; nếu là DATE thì CURRENT_DATE() > app_date

  UNION ALL
  /* Các bank merge vào bank “Hiệu lực” */
  SELECT cm.bank_id AS column_value
  FROM citad_merge cm
  WHERE cm.merge_to IN (
      SELECT clr.bank_id
      FROM citad_liquidity_risk clr
      WHERE clr.status = 'Hiệu lực'
        AND NOW() > clr.app_date
  )
    AND cm.is_active = 'Y'

  UNION ALL
  /* TGTT mapping vào bank “Hiệu lực” */
  SELECT CAST(tc.tgtt_id AS UNSIGNED) AS column_value
  FROM tgtt_config tc
  WHERE tc.report_bank IN (
      SELECT clr.bank_id
      FROM citad_liquidity_risk clr
      WHERE clr.status = 'Hiệu lực'
        AND NOW() > clr.app_date
  )
) s;





-- test.V_ISOMESSAGE_TMP_TURN_0200 source

CREATE OR REPLACE
ALGORITHM = UNDEFINED VIEW `V_ISOMESSAGE_TMP_TURN_0200` (`card_no_trim`,
`trace_no_num`,
`term_id`,
`local_mmdd`,
`local_time_num`,
`acq_id_num`,
`MTI`,
`BEN_ID`,
`SERVICE_CODE`,
`ISS_ID`,
`PROC_CODE`,
`IBFT_INFO`,
`ACQ_COUNTRY`,
`POS_ENTRY_CODE`,
`POS_CONDITION_CODE`,
`ADDRESPONSE`,
`MVV`,
`F49`,
`SETTLEMENT_CODE`,
`SETTLEMENT_RATE`,
`ISS_CONV_RATE`,
`TCC`,
`REF_NO`,
`TNX_STAMP`,
`CARD_ACCEPT_NAME_LOCATION`,
`CARD_ACCEPT_ID_CODE`,
`SETTLE_DATE`,
`ACCOUNT_NO`,
`DEST_ACCOUNT`,
`MCC`,
`APPROVAL_CODE`,
`ADD_INFO`,
`amount_raw_num`,
`amount_ins_num`,
`f4_num`,
`f5_num`,
`f6_num`,
`trace2_num`) AS
SELECT
    TRIM(`B`.`CARD_NO`) AS `card_no_trim`,
    CASE
        WHEN `B`.`TRACE_NO` REGEXP _UTF8MB4'^[0-9]+$' THEN CAST(`B`.`TRACE_NO` AS DECIMAL(18, 6))
    END AS `trace_no_num`,
    SUBSTRING(TRIM(`B`.`TERM_ID`), 1, 8) AS `term_id`,
    CASE
        WHEN `B`.`LOCAL_DATE` REGEXP _UTF8MB4'^[0-9]{4}$' THEN LPAD(`B`.`LOCAL_DATE`, 4, _UTF8MB4'0')
        WHEN `B`.`LOCAL_DATE` REGEXP _UTF8MB4'^[0-9]{8}$' THEN SUBSTRING(`B`.`LOCAL_DATE`, 5, 4)
        ELSE NULL
    END AS `local_mmdd`,
    CASE
        WHEN `B`.`LOCAL_TIME` REGEXP _UTF8MB4'^[0-9]+$' THEN CAST(`B`.`LOCAL_TIME` AS DECIMAL(18, 6))
    END AS `local_time_num`,
    CASE
        WHEN `B`.`ACQ_ID` REGEXP _UTF8MB4'^[0-9]+$' THEN CAST(`B`.`ACQ_ID` AS DECIMAL(18, 6))
    END AS `acq_id_num`,
    `B`.`MTI` AS `MTI`,
    `B`.`BEN_ID` AS `BEN_ID`,
    `B`.`SERVICE_CODE` AS `SERVICE_CODE`,
    `B`.`ISS_ID` AS `ISS_ID`,
    `B`.`PROC_CODE` AS `PROC_CODE`,
    `B`.`IBFT_INFO` AS `IBFT_INFO`,
    `B`.`ACQ_COUNTRY` AS `ACQ_COUNTRY`,
    `B`.`POS_ENTRY_CODE` AS `POS_ENTRY_CODE`,
    `B`.`POS_CONDITION_CODE` AS `POS_CONDITION_CODE`,
    `B`.`ADDRESPONSE` AS `ADDRESPONSE`,
    `B`.`MVV` AS `MVV`,
    `B`.`F49` AS `F49`,
    `B`.`SETTLEMENT_CODE` AS `SETTLEMENT_CODE`,
    `B`.`SETTLEMENT_RATE` AS `SETTLEMENT_RATE`,
    `B`.`ISS_CONV_RATE` AS `ISS_CONV_RATE`,
    `B`.`TCC` AS `TCC`,
    `B`.`REF_NO` AS `REF_NO`,
    `B`.`TNX_STAMP` AS `TNX_STAMP`,
    `B`.`CARD_ACCEPT_NAME_LOCATION` AS `CARD_ACCEPT_NAME_LOCATION`,
    `B`.`CARD_ACCEPT_ID_CODE` AS `CARD_ACCEPT_ID_CODE`,
    `B`.`SETTLE_DATE` AS `SETTLE_DATE`,
    `B`.`ACCOUNT_NO` AS `ACCOUNT_NO`,
    `B`.`DEST_ACCOUNT` AS `DEST_ACCOUNT`,
    `B`.`MCC` AS `MCC`,
    `B`.`APPROVAL_CODE` AS `APPROVAL_CODE`,
    `B`.`ADD_INFO` AS `ADD_INFO`,
    CASE
        WHEN `B`.`AMOUNT` REGEXP _UTF8MB4'^[0-9]+$' THEN CAST(`B`.`AMOUNT` AS DECIMAL(20))
    END AS `amount_raw_num`,
    CASE
        WHEN `B`.`AMOUNT` REGEXP _UTF8MB4'^[0-9]+$' THEN CAST(SUBSTRING(`B`.`AMOUNT`, 1, GREATEST(CHAR_LENGTH(`B`.`AMOUNT`)-2, 0)) AS DECIMAL(20))
    END AS `amount_ins_num`,
    CASE
        WHEN `B`.`F4` REGEXP _UTF8MB4'^[0-9]+$' THEN CAST(SUBSTRING(`B`.`F4`, 1, GREATEST(CHAR_LENGTH(`B`.`F4`)-2, 0)) AS DECIMAL(20))
    END AS `f4_num`,
    CASE
        WHEN `B`.`F5` REGEXP _UTF8MB4'^[0-9]+$' THEN CAST(SUBSTRING(`B`.`F5`, 1, GREATEST(CHAR_LENGTH(`B`.`F5`)-2, 0)) AS DECIMAL(20))
    END AS `f5_num`,
    CASE
        WHEN `B`.`F6` REGEXP _UTF8MB4'^[0-9]+$' THEN CAST(SUBSTRING(`B`.`F6`, 1, GREATEST(CHAR_LENGTH(`B`.`F6`)-2, 0)) AS DECIMAL(20))
    END AS `f6_num`,
    CASE
        WHEN `B`.`TRACE_NO` REGEXP _UTF8MB4'^[0-9]+$' THEN CAST(CONCAT(_UTF8MB4'2', `B`.`TRACE_NO`) AS DECIMAL(20))
    END AS `trace2_num`
FROM
    `test`.`ISOMESSAGE_TMP_TURN` AS `B`
WHERE
    `B`.`CARD_NO` IS NOT NULL
    AND `B`.`MTI` = _UTF8MB4'0200'
    AND `B`.`BEN_ID` REGEXP _UTF8MB4'^[0-9]+$'
    AND `B`.`TRACE_NO` REGEXP _UTF8MB4'^[0-9]+$';